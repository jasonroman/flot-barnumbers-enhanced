<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="flot-barnumbers-enhanced : Enhanced version of flot-barnumbers plugin with additional options" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>flot-barnumbers-enhanced</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/jasonroman/flot-barnumbers-enhanced">View on GitHub</a>

          <h1 id="project_title">flot-barnumbers-enhanced</h1>
          <h2 id="project_tagline">Enhanced version of flot-barnumbers plugin with additional options</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/jasonroman/flot-barnumbers-enhanced/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/jasonroman/flot-barnumbers-enhanced/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="flot-barnumbers-enhanced" class="anchor" href="#flot-barnumbers-enhanced"><span class="octicon octicon-link"></span></a>Flot Barnumbers Enhanced</h1>

<p>Enhanced version of the <a href="https://github.com/joetsoi/flot-barnumbers">flot-barnumbers plugin</a> by Joe Tsoi for <a href="http://www.flotcharts.org">Flot</a> with additional options.  The base plugin draws bar chart values on each bar (centered horizontally and vertically by default).  This plugin offers additional options for formatting the numbers, changing the font/color, using a threshold to determine whether to display the numbers above or below the bar, and a pixel-based vertical offset.</p>

<p>This project stemmed from needing a few features that the original plugin did not provide:</p>

<ul>
<li>
<strong>Issue:</strong> The plugin only allowed <em>barWidth</em>, <em>xAlign/yAlign</em>, and <em>horizontal</em> to be set globally</li>
<li>
<strong>Solution:</strong> You may now set all options on a per-series basis<br> </li>
<li>
<strong>Issue:</strong> Since the numbers were drawn directly on the graph image, the font could not be altered</li>
<li>
<strong>Solution:</strong> Use the <em>font</em> and <em>fontColor</em> options to modify the font<br> </li>
<li>
<strong>Issue:</strong> Another issue with the numbers being drawn on the image was that there was no way to format the numbers</li>
<li>
<strong>Solution:</strong> You may define a function and set the <em>formatter</em> option to that function, which will pass it the value of the number, which can then be formatted however is needed<br> </li>
<li>
<strong>Issue:</strong> If the bar itself was very small, the label would overlap the bar.</li>
<li>
<strong>Solution:</strong> The <em>threshold</em> feature allows values at a certain percentage to display above the bar rather than trying to display inside of it.  This should be a percentage value (such as 0.25) combined with a <em>yAlign</em> value of 0 and a <em>yOffset</em> value (in pixels) if you want some spacing so that the number is not directly on the bar line.</li>
</ul><p>View the <a href="http://jasonroman.github.io/flot-barnumbers-enhanced/example.html">example page</a> to see these new features of the plugin in action.</p>

<hr><p>Specifying for all series:</p>

<pre><code>series: {
    bars: {
        numbers: {
            show:       boolean - enable or disable the numbers on the bars
            formatter:  function - formats the value - leave out of options to display as is
            font:       font - font specification of the number
            fontColor:  colorspec - color of the number
            xAlign:     function - x-value transform - defaults to horizontal center of bar
            yAlign:     function - y-value transform - defaults to vertical center of bar
            threshold:  float|false - percentage of maximum chart value with which to display numbers above the bar
            xOffset:    integer - number of pixels of additional horizontal offset to apply to each number
            yOffset:    integer - number of pixels of additional vertical offset to apply to each number
        }
    }
}
</code></pre>

<p>Specifying for a single series:</p>

<pre><code>$.plot($("#placeholder"), [{
    data: [ ... ],
    bars: { numbers: { ... }, ... }
}])
</code></pre>

<p>The specifications and description of each option are listed above.  Here are some specific examples of usage:</p>

<p><strong>Using the number formatter to add a '$' sign in front of each value:</strong></p>

<pre><code>var barnumberFormatter = function(value) {
    return '$' + value;
}

$.plot('#plot', [{
    data: [ ... ],
    bars: { 
        numbers: {
            show: true,
            formatter: barnumberFormatter
        }
    }
]);
</code></pre>

<p><strong>Using the font feature to alter the font, size, and color of the numbers:</strong></p>

<pre><code>$.plot('#plot', [{
    data: [ ... ],
    bars: { 
        numbers: {
            show: true,
            font: '14pt Arial',
            fontColor: '#FF0000'
        }
    }
]);
</code></pre>

<p><strong>Using the threshold feature to display values above the bar at a specific percentage threshold:</strong></p>

<pre><code>$.plot('#plot', [{
    data: [ ... ],
    bars: { 
        numbers: {
            show: true,
            // all 3 of the following values should be set when using threshold
            threshold: 0.50, // any value lower than 50% of the maximum data point will display above the bar
            yAlign: function(y) { return y; }, // shows numbers at the top of the bar
            yOffset: 5 // pixel offset so numbers are not right up on the edge of the top of the bar
        }
    }
]);
</code></pre>

<p><strong>Using the threshold feature on a horizontal bar chart:</strong></p>

<pre><code>$.plot('#plot', [{
    data: [ ... ],
    bars: { 
        horizontal: true,
        numbers: {
            show: true,
            // all 3 of the following values should be set when using threshold
            threshold: 0.25, // any value lower than 25% of the maximum data point will display above the bar
            xAlign: function(x) { return x; }, // shows numbers at the top of the bar
            xOffset: 5 // pixel offset so numbers are not right up on the edge of the top of the bar
        }
    }
]);
</code></pre>

<p><strong>Horizontally centering the values while using the <a href="http://www.flotcharts.org/flot/jquery.flot.categories.js">categories plugin</a>:</strong></p>

<p>The categories plugin converts category names to numerical values, but automatically sets the center of the bar to that value rather than the start of the bar.  You must use the xAlign function (or yAlign for horizontal bars) to horizontally center the value.</p>

<pre><code>$.plot('#plot', [{
    data: [ ... ],
    xaxis: {
        mode: 'categories'
    },
    bars: { 
        numbers: {
            show: true
            xAlign: function(x) { return x; },
        }
    }
]);
</code></pre>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">flot-barnumbers-enhanced maintained by <a href="https://github.com/jasonroman">jasonroman</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-48986218-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
